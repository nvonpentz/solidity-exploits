pragma solidity ^0.4.4;

contract Bank {
	mapping(address=>uint) public balances;
    address public payer;
    address[] public addressesToRefund;
	
    function Bank() public payable {
        payer = msg.sender;
        balances[msg.sender] = msg.value;
        addressesToRefund.push(msg.sender);
    }
	
	function signUp() public payable {
		balances[msg.sender] = msg.value;
	}
	
	function cashOutEveryone() public payable {
	    require(payer == msg.sender);
    	for (uint i=0; i< addressesToRefund.length; i++ ) {
    	    msg.sender.transfer(balances[msg.sender]);
    	}
	}

	function getNumberOfAccounts() public constant returns (uint) {
		return addressesToRefund.length;
	}

}